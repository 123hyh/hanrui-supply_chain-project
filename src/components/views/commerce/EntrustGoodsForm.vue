<template>
  <el-dialog :visible.sync="popup">
    <!-- 标题 -->
    <div slot="title">{{isUpdate ? '修改' : '新增'}}委托订单--商品信息</div>

    <!-- 按钮行 -->
    <div slot="footer">
      <el-button type="primary" @click="saveForm">保存</el-button>
      <el-button type="cancel" @click="closeForm">取消</el-button>
    </div>

    <!-- 表单 -->
    <el-form ref="form" :model="formEntity" label-position="right" :inline="true" :rules="formRules">
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="表业务主键编号" prop="itemCode">
						<el-input v-model="formEntity.itemCode" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="委托订单号" prop="entrustOrderNo">
						<el-input v-model="formEntity.entrustOrderNo" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="订单型号" prop="orderModel">
						<el-input v-model="formEntity.orderModel" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="来货规格型号" prop="arrivalGoodsModel">
						<el-input v-model="formEntity.arrivalGoodsModel" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="来货编码" prop="arrivalGoodsCode">
						<el-input v-model="formEntity.arrivalGoodsCode" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="来货名称" prop="arrivalGoodsName">
						<el-input v-model="formEntity.arrivalGoodsName" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="商品编码" prop="goodsCode">
						<el-input v-model="formEntity.goodsCode" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="商品名称" prop="goodsName">
						<el-input v-model="formEntity.goodsName" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="税号" prop="taxNo">
						<el-input v-model="formEntity.taxNo" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="附号" prop="attachNo">
						<el-input v-model="formEntity.attachNo" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="卖方数量" prop="sellerQuantity">
						<el-input v-model="formEntity.sellerQuantity" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="卖方单位" prop="sellerUnit">
						<el-input v-model="formEntity.sellerUnit" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="卖方单价" prop="sellerPrice">
						<el-input v-model="formEntity.sellerPrice" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="卖方币别" prop="sellerCurrency">
						<el-input v-model="formEntity.sellerCurrency" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="卖方货价" prop="sellerGoodsValue">
						<el-input v-model="formEntity.sellerGoodsValue" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="管制物品" prop="controlledGoods">
						<el-input v-model="formEntity.controlledGoods" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="监管方式" prop="superviseMode">
						<el-input v-model="formEntity.superviseMode" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="海关汇率" prop="customsExchangeRate">
						<el-input v-model="formEntity.customsExchangeRate" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="海关税率%" prop="customTaxRate">
						<el-input v-model="formEntity.customTaxRate" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="加征税率" prop="increaseTaxRate">
						<el-input v-model="formEntity.increaseTaxRate" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="海关税额" prop="customTaxAmount">
						<el-input v-model="formEntity.customTaxAmount" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="增值税税率" prop="vatTaxRate">
						<el-input v-model="formEntity.vatTaxRate" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="增值税税额" prop="vatTaxAmount">
						<el-input v-model="formEntity.vatTaxAmount" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="运费费率%" prop="freightRate">
						<el-input v-model="formEntity.freightRate" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="保费费率%" prop="premiumRate">
						<el-input v-model="formEntity.premiumRate" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="杂费费率%" prop="extrasRate">
						<el-input v-model="formEntity.extrasRate" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="费额" prop="costAmount">
						<el-input v-model="formEntity.costAmount" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="服务费汇率%" prop="serviceExchangeRate">
						<el-input v-model="formEntity.serviceExchangeRate" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="服务费币别" prop="serviceCurrency">
						<el-input v-model="formEntity.serviceCurrency" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="服务费" prop="serviceFee">
						<el-input v-model="formEntity.serviceFee" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="买方货款汇率" prop="buyerExchangeRate">
						<el-input v-model="formEntity.buyerExchangeRate" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="买方币别" prop="buyerCurrency">
						<el-input v-model="formEntity.buyerCurrency" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="买方单价" prop="buyerPrice">
						<el-input v-model="formEntity.buyerPrice" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="买方货值" prop="buyerGoodsValue">
						<el-input v-model="formEntity.buyerGoodsValue" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="税种编码" prop="taxTypeCode">
						<el-input v-model="formEntity.taxTypeCode" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="税种名称" prop="taxTypeName">
						<el-input v-model="formEntity.taxTypeName" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="其他税率" prop="otherTaxRate">
						<el-input v-model="formEntity.otherTaxRate" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="其他税金" prop="otherTaxAmount">
						<el-input v-model="formEntity.otherTaxAmount" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="价税合计" prop="priceTax">
						<el-input v-model="formEntity.priceTax" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="净重" prop="netWeight">
						<el-input v-model="formEntity.netWeight" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="净重可信度" prop="netWeightCredit">
						<el-input v-model="formEntity.netWeightCredit" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="毛重" prop="grossWeight">
						<el-input v-model="formEntity.grossWeight" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="体积" prop="volume">
						<el-input v-model="formEntity.volume" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="品牌" prop="brand">
						<el-input v-model="formEntity.brand" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="品牌可信度" prop="brandCredit">
						<el-input v-model="formEntity.brandCredit" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="原产地" prop="sourceArea">
						<el-input v-model="formEntity.sourceArea" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="原产地可信度" prop="sourceAreaCredit">
						<el-input v-model="formEntity.sourceAreaCredit" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="物料编码" prop="materialCode">
						<el-input v-model="formEntity.materialCode" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="物料名称" prop="materialName">
						<el-input v-model="formEntity.materialName" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="PO号" prop="poNo">
						<el-input v-model="formEntity.poNo" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="供应商发票号" prop="supplierInvoiceNo">
						<el-input v-model="formEntity.supplierInvoiceNo" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="批号" prop="batchNo">
						<el-input v-model="formEntity.batchNo" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="3C项目" prop="threecItem">
						<el-input v-model="formEntity.threecItem" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
				<el-col :span="12">
					<el-form-item :label-width="labelWidth" label="加征税目" prop="increaseItem">
						<el-input v-model="formEntity.increaseItem" :class="inputClass" ></el-input>
					</el-form-item>
				</el-col>
			</el-row>

    </el-form>
  </el-dialog>
</template>

<script>
import EntrustGoods from "../../../domain/entities/commerce/EntrustGoods";
import appHelper from "../../../assets/js/appHelper";

export default {
  props: {
    isUpdate: Boolean,
    curEntity: Object
  },

  inject: ["formEvents"],

  data() {
    return {
      formEntity: this.isUpdate ? this.curEntity : new EntrustGoods(),

      // 控制弹出层显示
      popup: false,

      // 设置 label 宽度
      labelWidth: "150px",
      // el-input 类名
      inputClass: "input-item",

      // 验证规则
      formRules: {
        //deptCode: [appHelper.validateRule.required("所属部门")],
      }
    };
  },
  methods: {
    // 点击保存
    saveForm() {
      var self = this;
      this.$refs.form.validate().then(() => {
        // 表单验证通过后...

        if (!this.isUpdate) {
          // 新增
          appHelper
            .submitCreate("/entrustgoods/", self.formEntity)
            .then(function() {
              // 提交成功后...
              
              alert("保存成功！");
            });
          this.formEntity = new EntrustGoods();
          this.loadEntrustGoodsCode();
          this.popup = false;
        } else {
          // 修改
          appHelper
            .submitCreate("/entrustgoods/", self.formEntity)
            .then(function() {
              // 提交成功后...

              alert("保存成功！");
            });
        }
      });
    },
    //加载委托订单--商品信息编码
    loadEntrustGoodsCode() {
      appHelper
        .get("/entrustgoods/itemCode")
        .then(result => (this.formEntity.itemCode = result.data));
    },
    // 点击取消
    closeForm() {
      this.popup = false;
    }
  },

  created() {
    this.loadEntrustGoodsCode();
    // 监听事件
    this.formEvents.$on("openform", () => (this.popup = true));
  }
};
</script>

<style scoped>
.input-item {
  width: 180px;
}
</style>
